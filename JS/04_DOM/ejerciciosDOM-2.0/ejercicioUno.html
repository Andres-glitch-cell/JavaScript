<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio DOM Fácil</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
        }

        #contenedorPrincipal {
            /* Nombre de ID cambiado */
            border: 2px solid #aaa;
            padding: 15px;
            margin-bottom: 20px;
        }

        p {
            background: #f0f0f0;
            padding: 8px;
            margin: 8px 0;
        }

        button {
            margin: 5px;
            padding: 10px;
            cursor: pointer;
        }
    </style>
</head>

<body>

    <h1>Manipulación del DOM</h1>
    <div id="contenedorPrincipal">
        <p>Este es mi primer párrafo</p>
    </div>

    <button onclick="anadirParrafoAlFinal()">1. Añadir párrafo (appendChild)</button>
    <button onclick="insertarDetrasDelPrimero()">2. Insertar detrás del primero (insertBefore)</button>
    <button onclick="reemplazarElSegundoParrafo()">3. Reemplazar el segundo (replaceChild)</button>
    <button onclick="eliminarElSegundoParrafo()">4. Borrar el que va después del primero (removeChild)</button>
    <button onclick="clonarTodoElContenedor()">5. Clonar todo el div (cloneNode)</button>

    <script>
        // Función auxiliar para crear un <p> con texto
        function crearNuevoElementoParrafo(textoContenido) {
            // "elementoP" es el objeto <p>
            const elementoP = document.createElement('p');
            // "textoContenido" es el string que pasamos (ej: 'Párrafo añadido')
            elementoP.textContent = textoContenido;
            return elementoP;
        }

        // 1. AÑADIR al final
        function anadirParrafoAlFinal() {
            // Referencia al <div> contenedor
            const contenedorDOM = document.getElementById('contenedorPrincipal');
            // Usamos appendChild para colgar el nuevo elemento dentro de él
            contenedorDOM.appendChild(crearNuevoElementoParrafo('1. Párrafo AÑADIDO al final'));
        }

        // 2. INSERTAR justo detrás del primero
        function insertarDetrasDelPrimero() {
            const contenedorDOM = document.getElementById('contenedorPrincipal');
            // Una lista de todos los elementos <p> hijos
            const listaDeParrafos = contenedorDOM.getElementsByTagName('p');

            // Verificamos que al menos haya un párrafo antes de intentar la operación
            if (listaDeParrafos.length >= 1) {
                // Creamos el párrafo que vamos a inyectar
                const nuevoParrafoAInsertar = crearNuevoElementoParrafo('2. Párrafo INSERTADO después del primero');

                // Si existe el segundo párrafo (índice 1), lo usamos como REFERENCIA
                if (listaDeParrafos.length > 1) {
                    const segundoParrafoActual = listaDeParrafos[1];
                    // insertBefore(nuevo, referencia) lo coloca ANTES de la referencia
                    contenedorDOM.insertBefore(nuevoParrafoAInsertar, segundoParrafoActual);
                } else {
                    // Si solo hay uno, lo ponemos al final (detrás del primero)
                    contenedorDOM.appendChild(nuevoParrafoAInsertar);
                }
            }
        }

        // 3. REEMPLAZAR el segundo párrafo
        function reemplazarElSegundoParrafo() {
            const contenedorDOM = document.getElementById('contenedorPrincipal');
            const listaDeParrafos = contenedorDOM.getElementsByTagName('p');

            if (listaDeParrafos.length >= 2) {
                // El elemento que toma el lugar
                const parrafoReemplazante = crearNuevoElementoParrafo('3. Párrafo REEMPLAZADO (Antes era el segundo)');
                // El elemento a eliminar (el segundo, índice 1)
                const parrafoVictima = listaDeParrafos[1];

                // replaceChild(nuevoNodo, nodoViejo)
                contenedorDOM.replaceChild(parrafoReemplazante, parrafoVictima);
            } else {
                alert('¡Atención! Necesitas al menos 2 párrafos para poder reemplazar el segundo.');
            }
        }

        // 4. BORRAR el que va justo después del primero (el segundo)
        function eliminarElSegundoParrafo() {
            const contenedorDOM = document.getElementById('contenedorPrincipal');
            const listaDeParrafos = contenedorDOM.getElementsByTagName('p');

            if (listaDeParrafos.length > 1) {
                // El elemento a borrar es el segundo (índice [1])
                const parrafoAborrar = listaDeParrafos[1];
                // removeChild(elementoQueQuieroBorrar)
                contenedorDOM.removeChild(parrafoAborrar);
            } else {
                alert('No hay párrafos suficientes para borrar (se necesita al menos un segundo párrafo).');
            }
        }

        // 5. CLONAR todo el div
        function clonarTodoElContenedor() {
            // El elemento DIV original
            const contenedorOriginal = document.getElementById('contenedorPrincipal');
            // La variable "copiaProfunda" almacena el duplicado del DIV y su contenido (true)
            const copiaProfunda = contenedorOriginal.cloneNode(true);

            // IMPORTANTE: Quitamos el ID para que no haya dos elementos con el mismo ID en el HTML
            copiaProfunda.id = 'contenedorClonado';

            // Opcional: Modificamos el texto del primer hijo <p> del clon para identificarlo
            copiaProfunda.querySelector('p').textContent += ' (5. CLONADO COMPLETADO)';

            // Añadimos el contenedor clonado al final del <body>
            document.body.appendChild(copiaProfunda);
        }
    </script>
</body>

</html>